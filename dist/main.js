(()=>{"use strict";let t=function(){let t=document.querySelector(".projectsWrapper");t.innerHTML="",i.forEach((n=>{let o=document.createElement("div");o.classList.add("project","card","my-2"),o.setAttribute("data-index",""+i.indexOf(n)),o.innerHTML=`\n            <div class="card-header d-flex justify-content-between">\n                <span>${n.name}</span>\n                <button type="button" class="close" aria-label="Close">\n                    <span class="closeProject" data-target="${n.name}" aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <ul class="list-group list-group-flush" id="${n.name}">\n                <p>No tasks yet! Add one below</p>\n            </ul>\n            <form class="newTaskForm">\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-6">\n                        <input name="title" type="text" class="form-control taskName" placeholder="Task Name">\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <select name="priority" class="form-control-plaintext prioritySelect">\n                            <option>High Priority</option>\n                            <option selected>Medium Priority</option>\n                            <option>Low Priority</option>\n                        </select>\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <input name="dueDate" type="number" class="form-control dueDate" placeholder="Due Date">\n                    </div>\n                </div>\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-9">\n                        <textarea name="description" class="form-control description" id="exampleFormControlTextarea1" rows="1" placeholder="Description"></textarea>\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <button type="submit" class="btn btn-primary mb-2 addTask">Add Task</button>\n                    </div>\n                </div>\n            </form>\n        `,t.appendChild(o),e(n)}))},e=function(t){console.log(t);let e=document.getElementById(t.name);e.innerHTML="",t.taskList.forEach((n=>{let o=document.createElement("li");o.classList.add("list-group-item"),o.setAttribute("data-taskIndex",""+t.taskList.indexOf(n)),o.setAttribute("priority",n.priority),o.setAttribute("completed",n.completed),o.innerHTML=`\n            <form>\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-1">\n                        <input class="form-check-input m-0 position-static" type="checkbox" value="" id="defaultCheck1">\n                    </div>\n                    <div class="form-group mb-2 col-md-6">\n                        <input name="title" type="text" disabled class="form-control-plaintext taskName" value="${n.title}">\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <select name="priority" disabled class="form-control-plaintext prioritySelect">\n                            <option ${"High Priority"===n.priority?"selected":""}>High Priority</option>\n                            <option ${"Medium Priority"===n.priority?"selected":""}>Medium Priority</option>\n                            <option ${"Low Priority"===n.priority?"selected":""}>Low Priority</option>\n                        </select>\n                    </div>\n                    <div class="form-group mb-2 col-md-2">\n                        <input name="dueDate" type="number" disabled class="form-control-plaintext dueDate" value="${n.dueDate}">\n                    </div>\n                </div>\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-9">\n                        <textarea  name="description" disabled class="form-control-plaintext description" id="exampleFormControlTextarea1" rows="1">${n.description}</textarea>\n                    </div>\n                    <div class="form-group button-group mb-2 col-md-3" data-projectIndex="${i.indexOf(t)}" data-taskIndex="${t.taskList.indexOf(n)}">\n                        <button class="btn btn-primary mb-2 editTask">Edit Task</button>\n                        <button class="btn btn-danger mb-2 deleteTask">Delete Task</button>\n                    </div>\n                </div>\n            </form>\n        `,e.appendChild(o)}))};function n(t,e,n,i){this.title=t,this.description=e,this.priority=n,this.dueDate=i,this.completed=!1,this.amend=function(t,e,n,i){this.title=t,this.description=e,this.priority=n,this.dueDate=i},this.toggleComplete=function(){this.completed=!this.completed}}let i=JSON.parse(localStorage.getItem("myToDoLists"))||[];function o(e){i.push(new r(e)),localStorage.setItem("myToDoLists",JSON.stringify(i)),t()}function a(t){for(var e=t.querySelectorAll("input,select,textarea"),n=0;n<e.length;n++)e[n].disabled=!e[n].disabled,e[n].classList.toggle("form-control-plaintext"),e[n].classList.toggle("form-control")}function r(t){this.name=t,this.taskList=[]}(function(){let t=document.querySelector("body"),e=document.createElement("div");e.classList.add("container","mt-5");let n=document.createElement("div");n.classList.add("projectsWrapper");let i=document.createElement("h1");i.textContent="Modular To Do List";let o=document.createElement("form");o.classList.add("form-inline"),o.setAttribute("id","newProjectForm"),o.innerHTML='\n        <div class="form-group mb-2 mr-2">\n            <input type="text" class="form-control" placeholder="Enter new list name">\n        </div>\n        <button type="submit" class="btn btn-primary mb-2">Add List</button>\n    ',e.appendChild(i),e.appendChild(n),e.appendChild(o),t.appendChild(e)})(),document.addEventListener("submit",(function(t){"newProjectForm"===t.target.id&&(t.preventDefault(),o(t.target[0].value),t.target[0].value="")})),document.addEventListener("click",(function(e){if(e.target.classList.contains("closeProject")){console.log(e.target.getAttribute("data-target"));let o=e.target.getAttribute("data-target");n=o,i=i.filter((t=>t.name!==n)),localStorage.setItem("myToDoLists",JSON.stringify(i)),t()}var n})),document.addEventListener("submit",(function(t){var o,a,r,s,l;t.target.classList.contains("newTaskForm")&&(t.preventDefault(),o=t.target.parentNode.getAttribute("data-index"),a=t.target.elements.title.value,r=t.target.elements.description.value,s=t.target.elements.priority.value,l=t.target.elements.dueDate.value,i[o].taskList.push(new n(a,r,s,l)),localStorage.setItem("myToDoLists",JSON.stringify(i)),e(i[o]))})),document.addEventListener("click",(function(t){if(t.target.classList.contains("editTask")){t.preventDefault();let c=t.target.closest("form");t.target.parentNode.hasAttribute("active")?(n=t.target.parentNode.getAttribute("data-projectIndex"),o=t.target.parentNode.getAttribute("data-taskIndex"),r=c.elements.title.value,s=c.elements.description.value,l=c.elements.priority.value,d=c.elements.dueDate.value,console.log(i[n].taskList[o]),Object.assign(i[n].taskList[o],{title:r,description:s,priority:l,dueDate:d}),localStorage.setItem("myToDoLists",JSON.stringify(i)),e(i[n]),t.target.textContent="Edit Task",t.target.parentNode.querySelector(".deleteTask").textContent="Delete Task"):(t.target.textContent="Save changes",t.target.parentNode.querySelector(".deleteTask").textContent="Cancel"),a(c),t.target.parentNode.toggleAttribute("active")}var n,o,r,s,l,d})),document.addEventListener("click",(function(t){if(t.target.classList.contains("deleteTask")){t.preventDefault();let n=t.target.closest("form"),o=t.target.parentNode.getAttribute("data-projectIndex"),r=t.target.parentNode.getAttribute("data-taskIndex");t.target.parentNode.hasAttribute("active")?e(i[o]):function(t,n){i[t].taskList.splice(n,1),localStorage.setItem("myToDoLists",JSON.stringify(i)),e(i[t])}(o,r),a(n),t.target.parentNode.toggleAttribute("active")}})),null===localStorage.getItem("myToDoLists")?o("My First List"):t()})();