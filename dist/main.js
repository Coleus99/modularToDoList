(()=>{"use strict";let t=function(){let t=document.querySelector(".projectsWrapper");t.innerHTML="",o.forEach((n=>{let i=document.createElement("div");i.classList.add("project","card","my-2"),i.setAttribute("data-projectIndex",""+o.indexOf(n)),i.innerHTML=`\n            <div class="card-header d-flex justify-content-between">\n                <span>${n.name}</span>\n                <button type="button" class="close" aria-label="Close">\n                    <span class="closeProject" data-target="${n.name}" aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <ul class="list-group list-group-flush" id="${n.name}">\n                <p>No tasks yet! Add one below</p>\n            </ul>\n            <form class="newTaskForm">\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-6">\n                        <input name="title" type="text" class="form-control taskName" placeholder="Task Name">\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <select name="priority" class="form-control-plaintext prioritySelect">\n                            <option>High Priority</option>\n                            <option selected>Medium Priority</option>\n                            <option>Low Priority</option>\n                        </select>\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <input name="dueDate" type="number" class="form-control dueDate" placeholder="Due Date">\n                    </div>\n                </div>\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-9">\n                        <textarea name="description" class="form-control description" id="exampleFormControlTextarea1" rows="1" placeholder="Description"></textarea>\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <button type="submit" class="btn btn-primary mb-2 addTask">Add Task</button>\n                    </div>\n                </div>\n            </form>\n        `,t.appendChild(i),e(n)}))},e=function(t){let e=document.getElementById(t.name);e.innerHTML="",t.taskList.forEach((n=>{let i=document.createElement("li");i.classList.add("list-group-item"),i.setAttribute("data-taskIndex",""+t.taskList.indexOf(n)),i.setAttribute("data-projectIndex",""+o.indexOf(t)),i.setAttribute("priority",n.priority),i.setAttribute("completed",n.completed),i.innerHTML=`\n        <input name="status" class="form-check-input m-0 taskEditor toggleComplete" type="checkbox" ${n.completed?"checked":""}>\n        <form>\n            <div class="form-row">\n                    <div class="form-group mb-2 col-md-1">\n                    </div>\n                    <div class="form-group mb-2 col-md-6">\n                        <input name="title" type="text" disabled class="form-control-plaintext taskName" value="${n.title}">\n                    </div>\n                    <div class="form-group mb-2 col-md-3">\n                        <select name="priority" disabled class="form-control-plaintext prioritySelect">\n                            <option ${"High Priority"===n.priority?"selected":""}>High Priority</option>\n                            <option ${"Medium Priority"===n.priority?"selected":""}>Medium Priority</option>\n                            <option ${"Low Priority"===n.priority?"selected":""}>Low Priority</option>\n                        </select>\n                    </div>\n                    <div class="form-group mb-2 col-md-2">\n                        <input name="dueDate" type="number" disabled class="form-control-plaintext dueDate" value="${n.dueDate}">\n                    </div>\n                </div>\n                <div class="form-row">\n                    <div class="form-group mb-2 col-md-9">\n                        <textarea  name="description" disabled class="form-control-plaintext description" id="exampleFormControlTextarea1" rows="1">${n.description}</textarea>\n                    </div>\n                    <div class="form-group button-group mb-2 col-md-3" data-projectIndex="${o.indexOf(t)}" data-taskIndex="${t.taskList.indexOf(n)}">\n                        <button class="btn btn-primary mb-2 taskEditor editTask">Edit Task</button>\n                        <button class="btn btn-danger mb-2 taskEditor deleteTask">Delete Task</button>\n                    </div>\n                </div>\n            </form>\n        `,e.appendChild(i)}))};function n(t,e,n,o){this.title=t,this.description=e,this.priority=n,this.dueDate=o,this.completed=!1}let o=JSON.parse(localStorage.getItem("myToDoLists"))||[];function i(e){o.push(new a(e)),localStorage.setItem("myToDoLists",JSON.stringify(o)),t()}function s(t){for(var e=t.querySelectorAll("input,select,textarea"),n=0;n<e.length;n++)e[n].disabled=!e[n].disabled,e[n].classList.toggle("form-control-plaintext"),e[n].classList.toggle("form-control")}function a(t){this.name=t,this.taskList=[]}(function(){let t=document.querySelector("body"),e=document.createElement("div");e.classList.add("container","mt-5");let n=document.createElement("div");n.classList.add("projectsWrapper");let o=document.createElement("h1");o.textContent="Modular To Do List";let i=document.createElement("form");i.classList.add("form-inline"),i.setAttribute("id","newProjectForm"),i.innerHTML='\n        <div class="form-group mb-2 mr-2">\n            <input type="text" class="form-control" placeholder="Enter new list name">\n        </div>\n        <button type="submit" class="btn btn-primary mb-2">Add List</button>\n    ',e.appendChild(o),e.appendChild(n),e.appendChild(i),t.appendChild(e)})(),document.addEventListener("submit",(function(t){"newProjectForm"===t.target.id&&(t.preventDefault(),i(t.target[0].value),t.target[0].value="")})),document.addEventListener("click",(function(e){var n;e.target.classList.contains("closeProject")&&confirm("This project's tasks will also be deleted. Continue?")&&(n=e.target.closest(".project").getAttribute("data-projectIndex"),o.splice(n,1),localStorage.setItem("myToDoLists",JSON.stringify(o)),t())})),document.addEventListener("submit",(function(t){var i,s,a,r,l;t.target.classList.contains("newTaskForm")&&(t.preventDefault(),i=t.target.parentNode.getAttribute("data-projectIndex"),s=t.target.elements.title.value,a=t.target.elements.description.value,r=t.target.elements.priority.value,l=t.target.elements.dueDate.value,o[i].taskList.push(new n(s,a,r,l)),localStorage.setItem("myToDoLists",JSON.stringify(o)),e(o[i]),t.target.reset())})),document.addEventListener("click",(function(t){if(t.target.classList.contains("taskEditor")){let n=t.target.closest("form"),i=t.target.closest(".list-group-item").getAttribute("data-projectIndex"),a=t.target.closest(".list-group-item").getAttribute("data-taskIndex");t.target.classList.contains("editTask")&&(t.preventDefault(),n.hasAttribute("active")?(function(t,n,i,s,a,r){Object.assign(o[t].taskList[n],{title:i,description:s,priority:a,dueDate:r}),localStorage.setItem("myToDoLists",JSON.stringify(o)),e(o[t])}(i,a,n.elements.title.value,n.elements.description.value,n.elements.priority.value,n.elements.dueDate.value),t.target.textContent="Edit Task",t.target.parentNode.querySelector(".deleteTask").textContent="Delete Task"):(t.target.textContent="Save changes",t.target.parentNode.querySelector(".deleteTask").textContent="Cancel"),s(n),n.toggleAttribute("active")),t.target.classList.contains("deleteTask")&&(t.preventDefault(),n.hasAttribute("active")?e(o[i]):function(t,n){o[t].taskList.splice(n,1),localStorage.setItem("myToDoLists",JSON.stringify(o)),e(o[t])}(i,a),s(n),n.toggleAttribute("active")),t.target.classList.contains("toggleComplete")&&function(t,e){o[t].taskList[e].completed=!o[t].taskList[e].completed,localStorage.setItem("myToDoLists",JSON.stringify(o)),console.log(o[t].taskList[e])}(i,a)}})),null===localStorage.getItem("myToDoLists")?i("My First List"):t()})();